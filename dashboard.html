<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Banking Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
        integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="./assets/css/outputt.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400&display=swap" rel="stylesheet">

    <script src="https://www.gstatic.com/firebasejs/10.13.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.13.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.13.2/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.13.2/firebase-storage-compat.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>



</head>
<style>
    .chart-container {
        position: relative;
        width: 80%;
        margin: auto;
    }

    .detaills {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        margin-top: 20px;
        width: 100%;
    }

    .money-floww {
        width: 100%;
    }

    .crypto-chartt {
        width: 100%;
        height: 600px;
    }

    @media (max-width: 768px) {
        .crypto-chartt {
            height: 400px;
        }
    }

    @media (max-width: 480px) {
        .crypto-chartt {
            height: 300px;
        }
    }

    @media (max-width: 350px) {
        .crypto-chartt {
            height: 250px;
        }
    }
</style>

<body>
    <div class="dashboard">
        <aside class="sidebar">
            <a href="./dashboard.html">
                <div class="logo-wrap"><img class="logoo" src="./assets/images/logo.png" alt=""></div>
            </a>
            <ul class="nav">
                <a href="./dashboard.html">
                    <li><i style="margin-right: 10px;" class="fa-solid fa-house"></i>Dashboard</li>
                </a>
                <a href="./card.html">
                    <li><i style="margin-right: 10px;" class="fa-solid fa-address-card"></i>Card</li>
                </a>
                <a href="./accounthistory.html">
                    <li><i style="margin-right: 10px;" class="fa-solid fa-credit-card"></i>Transaction</li>
                </a>
                <a href="./investment.html">
                    <li><i style="margin-right: 10px;" class="fa-solid fa-dollar-sign"></i>Investment</li>
                </a>
                <a href="./accountprofile.html">
                    <li><i style="margin-right: 10px;" class="fa-solid fa-user"></i>Account Profile</li>
                </a>
            </ul>
            <div class="user">
                <!-- <img id="userDP" src="" alt="User"> -->
                <div class="user-info">
                    <!-- <h3 id="fullNameDisplay">Bruce James</h3> -->
                    <p id="emailDisplay">Let's create lasting value together with Orion Investment!</p>
                </div>
            </div>
        </aside>

        <main class="content">


            <header class="header">
    <h2>Investment Dashboard</h2>
    <div class="live-time" id="liveTime">
        <p id="timeElement"></p>
    </div>
    <button id="open-popup" class="filter">
        <i class="fa-solid fa-money-bill-transfer" style="margin-right: 10px;"></i> Withdraw Funds
    </button>
    <button id="open-popup" class="filter"><i style="margin-right: 10px;"
        class="fa-solid fa-money-bill-transfer"></i>Transfer Funds</button>
</header>



            <!-- pop up -->
            <div id="popup" class="popup-overlay">

                <div class="transfer-container">
                    <div class="transfer-header">
                        <h3>Help Me Transfer Money</h3>
                        <button id="close-popup" class="close-btn">&times;</button>
                    </div>

                    <form class="transfer-form">
                        <!-- Transfer From Section -->
                        <label for="transfer-from" class="block text-base font-medium text-gray-700 mb-1">Transfer From</label>
                        <select id="transfer-from" class="input-field w-full py-3 px-4 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200 bg-white text-gray-800 mb-4">
                            <option id="currentBalanceM">Current Balance</option>
                            <option id="brokerage">Brokerage</option>
                            <option id="dividend">Dividend</option>
                        </select>
                    
                        <!-- Transfer To Section -->
                        <label for="transfer-to" class="block text-base font-medium text-gray-700 mb-1">Transfer To</label>
                        <select id="transfer-to" class="input-field w-full py-3 px-4 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200 bg-white text-gray-800 mb-4">
                            <option  id="currentBalanceM">Current Balance</option>
                            <option id="brokerage">Brokerage</option>
                            <option id="dividend">Dividend</option>
                        </select>
                    
                        <!-- Amount Input Section -->
                        <label for="amount" class="block text-base font-medium text-gray-700 mb-1">Amount</label>
                        <input id="amount" name="amount" type="text" placeholder="Enter Amount"
                            class="w-full py-3 px-4 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200 bg-white text-black font-bold mb-4"
                            style="color: black !important; font-weight: bold !important;" required>
                    
                        <!-- Button Group -->
                        <div class="button-group flex justify-end space-x-4 mt-8">
                            <button id="cancel-popup" type="button"
                                class="cancel-btn w-32 py-2 px-4 bg-gray-300 hover:bg-gray-400 text-gray-800 font-medium rounded-md shadow transition duration-200 ease-in-out">
                                Cancel
                            </button>
                            <button id="continue" type="submit"
                                class="continue-btn w-36 py-2 px-4 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-medium rounded-md shadow transition duration-200 transform hover:scale-105 ease-in-out">
                                Continue
                            </button>
                        </div>
                    
                        <!-- Extra Options -->
                        <div class="extra-options mt-6 flex flex-col items-start space-y-2">
                            <!-- <a href="#" class="paypal-link text-blue-600 hover:text-blue-700 transition duration-200 flex items-center">
                                Send money with 
                                <img src="https://upload.wikimedia.org/wikipedia/commons/b/b5/PayPal.svg" alt="PayPal"
                                    class="paypal-logo w-16 h-auto ml-2">
                            </a> -->
                            <a href="./card.html" class="bank-link text-blue-600 hover:text-blue-700 transition duration-200">
                                Add a bank account
                            </a>
                        </div>
                    </form>
                    
                </div>

            </div>
            <!-- popup end -->
            <div class="section-wrap">
                <h2 class="section-title">Investment Overview</h2>

                <section class="overview">
                    
                        <!-- Current Balance Card -->
                        <div class="cardd balance-card bg-yellow-100 text-gray-800 w-full sm:w-[48%] lg:w-[30%] p-6 rounded-xl shadow-md transition-transform transform hover:translate-y-2 hover:shadow-lg relative">
                            <!-- Platinum Icon -->
                            <!-- Title -->
                            <h3 class="text-2xl font-bold mb-2 text-gray-900">Current Balance</h3>
                            
                            <!-- Balance Amount -->
                            <p class="text-4xl font-extrabold text-indigo-600 mb-4">$905,000.00</p>
                    
                            <!-- Plan Details -->
                            <div>
                                <p>Active Plan: <span class="text-blue-700 text-2xl" >Platinum</span></p>
                                <p>Dividend Interest: <span class="text-blue-700 text-2xl">0.4%</span></p>
                            </div>
                        </div>
                    
                    
                    <div class="card">
                        <h3 class="text-2xl font-bold mb-2 text-gray-900">Brokerage</h3>
                        <p style="color: red !important">$-48,000.50</p>
                        <p >Active Plan: <span class="text-blue-700 text-2xl" >Platinum</span></p>
                       
                    </div>
                    <div class="card">
                        <h3 class="text-2xl font-bold mb-2 text-gray-900">Dividend</h3>
                        <p>$21,720</p>
                    </div>
                </section>

                <section class="detaills">
                    <div class="money-floww w-full">
                        <canvas id="cryptoChart" class="crypto-chartt w-full h-full"></canvas>
                    </div>
                </section>

                <section  class="detaills w-full flex justify-center items-center p-4 sm:p-8">
                    <div class="money-flow w-full max-w-4xl bg-white shadow-md rounded-lg p-4 sm:p-6 md:p-8">
                        <div class="crypto-chart relative w-full h-64 sm:h-80 md:h-96">
                            <canvas id="stockPieChart" class="w-full h-full"></canvas>
                        </div>
                    </div>
                    
                    <div class="recent-transactions">
                        <h3>Recent Transactions</h3>
                        <ul>
                            <li><span>Bitcoin Investment</span><span>+$12,000.00</span></li>
                            <li><span>Ethereum Liquidity</span><span>+$5,500.00</span></li>
                            <li><span>Coinbase Withdrawal</span><span>-$3,200.00</span></li>
                            <li><span>Binance Profit</span><span>+$8,750.00</span></li>
                            <li><span>Stellar Transfer</span><span>-$1,250.00</span></li>
                            <li><span>USDT Investment</span><span>+$9,300.00</span></li>
                        </ul>
                    </div>
                </section>



            </div>


            <div class="scrolling-text">
                <span>Orion is guiding the future of financial technology with seamless transactions,
                    innovative solutions, and security at the forefront.
                    Join the stars with Orion, where your financial journey begins.</span>

                <span>Orion is guiding the future of financial technology with seamless transactions,
                    innovative solutions, and security at the forefront.
                    Join the stars with Orion, where your financial journey begins.</span>

                <span>Orion is guiding the future of financial technology with seamless transactions,
                    innovative solutions, and security at the forefront.
                    Join the stars with Orion, where your financial journey begins.</span>

                <span>Orion is guiding the future of financial technology with seamless transactions,
                    innovative solutions, and security at the forefront.
                    Join the stars with Orion, where your financial journey begins.</span>


            </div>



        </main>
    </div>
    <button id="signout-button" class="sticky-signout-button">Sign Out</button>
    
    <script>
        const firebaseConfig = {
          apiKey: "AIzaSyDTkXjNDPdbOeo32CaCkglIy-6nzuszEJM",
          authDomain: "orion-investment-2b141.firebaseapp.com",
          projectId: "orion-investment-2b141",
          storageBucket: "orion-investment-2b141.appspot.com",
          messagingSenderId: "911866094162",
          appId: "1:911866094162:web:bfe2dc2323995f4585358b",
          measurementId: "G-12SQKBDR1S"
        };
    
    
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();
        const storage = firebase.storage();
    
      </script>
    

</body>

</html>



<script>

    function updateTime() {
        const timeElement = document.getElementById('liveTime');
        const now = new Date();
        let hours = now.getHours();
        const minutes = now.getMinutes().toString().padStart(2, '0');
        const seconds = now.getSeconds().toString().padStart(2, '0');
        const ampm = hours >= 12 ? 'PM' : 'AM';

        // Convert to 12-hour format
        hours = hours % 12;
        hours = hours ? hours : 12; // If hour is 0, display as 12

        const formattedTime = `${hours}:${minutes}:${seconds} ${ampm}`;

        timeElement.textContent = formattedTime;
    }

    // Update the time every second
    setInterval(updateTime, 1000);

    // Initial call to display time immediately on load
    updateTime();


    // Get the popup elements
    const popup = document.getElementById("popup");
    const openPopupBtn = document.getElementById("open-popup");
    const closePopupBtn = document.getElementById("close-popup");
    const cancelPopupBtn = document.getElementById("cancel-popup");

    // Open popup on button click
    openPopupBtn.addEventListener("click", function () {
        popup.style.display = "flex";
    });

    // Close popup when 'X' button is clicked
    closePopupBtn.addEventListener("click", function () {
        popup.style.display = "none";
    });

    // Close popup when 'Cancel' button is clicked
    cancelPopupBtn.addEventListener("click", function () {
        popup.style.display = "none";
    });


</script>
<script>
    var docRef = db.collection("users").doc("e-mail"); // Use actual document ID

    docRef.get().then((doc) => {
        if (doc.exists) {
            const userData = doc.data();
            console.log("Document data:", userData);

            // Display data in HTML elements
            document.getElementById("salutationDisplay").innerText = userData.salutation || "";
            document.getElementById("firstNameDisplay").innerText = userData.firstName || "";
            document.getElementById("middleNameDisplay").innerText = userData.middleName || "";
            document.getElementById("lastNameDisplay").innerText = userData.lastName || "";
            document.getElementById("emailDisplay").innerText = userData.mail || ""; // Make sure 'mail' is the correct field
            document.getElementById('fullNameDisplay').innerText = `${userData.firstName} ${userData.lastName}` || "Name not available";
        } else {
            console.log("No such document!");
        }
    }).catch((error) => {
        console.log("Error getting document:", error);
    });

</script>
<script>
    // Function to handle sign-out
    const signout = document.getElementById("signout-button");

    signout.addEventListener('click', (e) => {
        auth.signOut().then(() => {
            // Sign-out successful.
            Toastify({
                text: "You have successfully signed out.",
                duration: 3000,
                gravity: "top",
                position: "right",
                backgroundColor: "linear-gradient(to right, #ff5f6d, #ffc371)",
                close: true
            }).showToast();

            // Optionally, redirect to a login page or another page
            window.location.href = "signin.html"; // Change this to your login page
        }).catch((error) => {
            // An error happened.
            Toastify({
                text: `Error signing out: ${error.message}`,
                duration: 3000,
                gravity: "top",
                position: "right",
                backgroundColor: "linear-gradient(to right, #ff0000, #ff6347)",
                close: true
            }).showToast();
        });
    })

</script>
<script>


    document.addEventListener('DOMContentLoaded', function () {
        const ctx = document.getElementById('cryptoChart').getContext('2d');

        const chart = new Chart(ctx, {
            type: 'line', // Change 'line' to the chart type you prefer (e.g., bar, pie)
            data: {
                labels: ['January', 'February', 'March', 'April', 'May', 'June'],
                datasets: [{
                    label: 'Crypto Prices',
                    data: [12000, 15000, 13000, 16000, 17000, 18000],
                    borderColor: 'rgba(255, 255, 255, 1)', // Change line color to white
                    backgroundColor: 'rgba(255, 255, 255, 0.2)', // Change fill color to semi-transparent white
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Months',
                            color: 'white' // Set x-axis title color to white
                        },
                        ticks: {
                            color: 'white' // Set x-axis labels color to white
                        }
                    },
                    y: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Price (USD)',
                            color: 'white' // Set y-axis title color to white
                        },
                        ticks: {
                            color: 'white' // Set y-axis labels color to white
                        },
                        grid: {
                            color: 'rgba(255, 255, 255, 0.2)' // Optional: set grid lines color to a light white
                        }
                    }
                },
                plugins: {
                    legend: {
                        labels: {
                            color: 'white' // Set legend text color to white
                        }
                    }
                }
            }
        });
    });

</script>


<script>
  // Initialize Firebase (use your own configuration)


  function users() {
    const docId = localStorage.getItem('userDocId');
    console.log("Retrieved docId from localStorage:", docId);

    if (!docId) {
      console.log("No user ID found in localStorage.");
      return;
    }

    const docRef = db.collection("users").doc(docId);

    docRef.get().then((doc) => {
      if (doc.exists) {
        console.log("Document data:", doc.data());
        const userData = doc.data();

        document.getElementById("firstNameDisplay").innerText = userData.first_name || "N/A";
        document.getElementById("lastNameDisplay").innerText = userData.last_name || "N/A";
        document.getElementById("emailDisplay").innerText = userData.email || "N/A";
        document.getElementById('fullNameDisplay').innerText = (userData.first_name || "") + " " + (userData.last_name || "");
      } else {
        console.log("No such document!");
      }
    }).catch((error) => {
      console.log("Error getting document:", error);
    });
  }

  // Call the users function when the page is fully loaded
  window.onload = function () {
    users();
  };
</script>




<script>
    // Get the context of the new canvas element
    const ctx = document.getElementById('stockPieChart').getContext('2d');

    // Sample stock data for the pie chart
    const stockData = {
        labels: ['Apple', 'Google', 'Microsoft', 'Amazon', 'Tesla', 'Facebook', 'Netflix'], // Stock symbols
        datasets: [{
            label: 'Stock Portfolio Distribution',
            data: [25, 15, 20, 10, 10, 10, 10], // Portfolio allocation in percentages
            backgroundColor: [
                '#FF6384', // Red
                '#36A2EB', // Blue
                '#FFCE56', // Yellow
                '#4BC0C0', // Teal
                '#9966FF', // Purple
                '#FF9F40', // Orange
                '#C9CBCF'  // Grey
            ],
            hoverOffset: 6, // Enlarge slice on hover
            borderWidth: 2,
            borderColor: '#ffffff'
        }]
    };

    // Chart configuration
    const config = {
        type: 'pie', // Pie chart type
        data: stockData,
        options: {
            responsive: true,
            maintainAspectRatio: false, // Ensures the chart scales with the container
            plugins: {
                legend: {
                    display: true,
                    position: 'bottom', // Adjusted to bottom for better visibility
                    labels: {
                        color: '#333', // Darker text for contrast
                        boxWidth: 15,
                        padding: 10,
                        font: {
                            size: 14,
                            weight: 'bold' // Bolder font style
                        }
                    }
                },
                tooltip: {
                    backgroundColor: 'rgba(0, 0, 0, 0.7)', // Darker tooltip background
                    titleFont: { size: 14, weight: 'bold' },
                    bodyFont: { size: 12 },
                    callbacks: {
                        label: (context) => {
                            let label = context.label || '';
                            let value = context.raw || 0;
                            return `${label}: ${value}%`;
                        }
                    }
                }
            },
            layout: {
                padding: 20 // Add padding around the chart
            }
        }
    };

    // Create the pie chart
    const stockPieChart = new Chart(ctx, config);
</script>

<script>

</script>


<script>
    const currentBalanceM = document.getElementById('currentBalanceM');
    const brokerage = document.getElementById('brokerage');
    const dividend= document.getElementById('dividend');
    const continue = document.getElementById('continue');


    const docRef = db.collection("users").doc(docId);
     
</script>